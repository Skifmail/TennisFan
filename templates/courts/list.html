{% extends 'base.html' %}

{% block title %}Корты{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Теннисные корты</h1>
    <p class="page-subtitle">Площадки для игры по всей России</p>
</div>

<div class="container">
    <div class="d-flex flex-wrap align-items-center gap-2" style="margin-bottom: var(--spacing-xl);">
        <form method="get" class="filter-bar" style="flex: 1; min-width: 200px;">
            <input name="city" class="form-control" placeholder="Любой город России" value="{{ current_city }}" onchange="this.form.submit()">
            <select name="surface" class="form-control" onchange="this.form.submit()">
                <option value="">Все покрытия</option>
                <option value="hard" {% if current_surface == 'hard' %}selected{% endif %}>Хард</option>
                <option value="clay" {% if current_surface == 'clay' %}selected{% endif %}>Грунт</option>
                <option value="grass" {% if current_surface == 'grass' %}selected{% endif %}>Трава</option>
                <option value="indoor" {% if current_surface == 'indoor' %}selected{% endif %}>Закрытый хард</option>
            </select>
        </form>
        <a href="{% url 'court_application_create' %}" class="btn btn-primary btn--filter-size">Подать заявку на добавление корта</a>
    </div>

    <div class="grid grid-3">
        {% for court in courts %}
        <a href="{% url 'court_detail' slug=court.slug %}" class="card">
            {% if court.image %}
            <img src="{{ court.image.url }}" alt="" class="card-image">
            {% else %}
            <div class="card-image" style="background: var(--color-bg-elevated);"></div>
            {% endif %}
            <div class="card-body">
                <h3 class="card-title">{{ court.name }}</h3>
                <p class="card-text">{{ court.address }}</p>
                <div class="d-flex gap-1 mt-2">
                    <span class="player-category">{{ court.get_surface_display }}</span>
                    {% if court.is_indoor %}
                    <span class="player-category" style="background: var(--color-bg-elevated); color: var(--color-text-secondary);">Крытый</span>
                    {% endif %}
                </div>
                <div class="court-card__footer mt-2 d-flex justify-content-between align-items-center flex-wrap gap-1">
                    {% if court.price_per_hour %}
                    <span class="text-primary" style="font-weight: 600;">{{ court.price_per_hour }} ₽/час</span>
                    {% else %}
                    <span></span>
                    {% endif %}
                    <span class="court-card__stars">
                        {% include "courts/_star_rating.html" with rating_percent=court.rating_percent rating_count=court.rating_count average_rating=court.average_rating size="sm" show_count=False %}
                    </span>
                </div>
            </div>
        </a>
        {% empty %}
        <p class="text-secondary">Корты не найдены.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}