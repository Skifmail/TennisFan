{% extends 'base.html' %}
{% load static %}

{% block title %}Редактирование профиля{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Редактирование профиля</h1>
</div>

<div class="container" style="max-width: 600px;">
    <div class="card">
        <div class="card-body" style="padding: var(--spacing-2xl);">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <h3 style="margin-bottom: var(--spacing-lg); font-size: var(--font-size-lg);">Основная информация</h3>

                <div class="form-group">
                    <label class="form-label">Аватар</label>
                    {{ form.avatar }}
                </div>

                <div class="d-flex gap-2">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">{{ form.first_name.label }}</label>
                        {{ form.first_name }}
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">{{ form.last_name.label }}</label>
                        {{ form.last_name }}
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Уровень мастерства (NTRP)</label>
                    <p class="text-secondary" style="margin-bottom: var(--spacing-sm);">
                        {{ form.instance.get_skill_level_display }} (NTRP {{ form.instance.ntrp_level }}).
                        Изменить можно только через <a href="{% url 'ntrp_test' %}" target="_blank" rel="noopener">NTRP-тест</a> или в админке.
                    </p>
                </div>

                <div class="form-group">
                    <label class="form-label">{{ form.birth_date.label }}</label>
                    {{ form.birth_date }}
                </div>

                <div class="d-flex gap-2">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">{{ form.gender.label }}</label>
                        {{ form.gender }}
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">{{ form.forehand.label }}</label>
                        {{ form.forehand }}
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">{{ form.city.label }}</label>
                        {{ form.city }}
                    </div>
                </div>

                <hr style="margin: var(--spacing-xl) 0; border: none; border-top: 1px solid var(--color-border);">

                <h3 style="margin-bottom: var(--spacing-lg); font-size: var(--font-size-lg);">Дополнительно</h3>

                <div class="form-group">
                    <label class="form-label">{{ form.bio.label }}</label>
                    {{ form.bio }}
                </div>

                <div class="d-flex gap-2 flex-wrap">
                    <div class="form-group form-group-messenger">
                        <label class="form-label form-label-with-logo">
                            <img src="{% static 'images/Telegram_logo.svg' %}" alt="" class="form-label__icon" width="18" height="18"> {{ form.telegram.label }} (username)
                        </label>
                        {{ form.telegram }}
                    </div>
                    <div class="form-group form-group-messenger">
                        <label class="form-label form-label-with-logo">
                            <img src="{% static 'images/WhatsApp.svg' %}" alt="" class="form-label__icon" width="18" height="18"> {{ form.whatsapp.label }} (номер)
                        </label>
                        {{ form.whatsapp }}
                    </div>
                    <div class="form-group form-group-messenger">
                        <label class="form-label form-label-with-logo">
                            <img src="{% static 'images/Max_logo_2025.png' %}" alt="" class="form-label__icon" width="18" height="18"> {{ form.max_contact.label }} (ссылка)
                        </label>
                        {{ form.max_contact }}
                    </div>
                </div>

                <div class="d-flex gap-2" style="margin-top: var(--spacing-lg);">
                    <button type="submit" class="btn btn-primary btn-lg" style="flex: 1;">Сохранить</button>
                    <a href="{% url 'profile' pk=request.user.player.pk %}" class="btn btn-ghost btn-lg">Отмена</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}